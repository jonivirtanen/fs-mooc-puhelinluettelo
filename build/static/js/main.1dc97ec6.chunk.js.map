{"version":3,"sources":["components/Person.js","components/FilterForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","_ref","person","deleteHandler","react_default","a","createElement","name","number","onClick","Filter","searchHandle","onChange","baseUrl","persons","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","concat","update","newObject","put","Notification","message","error","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","state","newName","newPhone","find","p","undefined","window","confirm","personService","changedPerson","filter","setState","notification","resetNoticationState","setTimeout","handleSearchChange","target","value","handleNameChange","handleNumberChange","handlePersonRemoval","console","log","catch","_this2","_this3","applyFilter","length","toLowerCase","includes","components_Notification","FilterForm","onSubmit","type","map","components_Person","key","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.1dc97ec6.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({person, deleteHandler}) => (\n    <tr>\n        <td>{person.name}</td>\n        <td>{person.number}</td>\n        <td><button onClick={deleteHandler}>Poista</button></td>\n    </tr>\n)\nexport default Person\n","import React from 'react'\n\nconst Filter = ({searchHandle}) => {\n    return (\n        <div>\n            Rajaa näytettäviä: <input onChange={searchHandle}></input>\n        </div>\n    )\n}\n\nexport default Filter\n\n","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, remove, update }","import React from 'react'\n\nconst Notification = ({message, error}) => {\n    if (message === null) {\n        return null\n    }\n    if (error) {\n        return (\n        <div className=\"messagebox error\">\n            {message}\n        </div>\n        )\n    }\n    return (\n        <div className=\"messagebox notification\">\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React from 'react';\nimport Person from './components/Person'\nimport Filter from './components/FilterForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      newName: '',\n      newPhone: '',\n      filter: '',\n      notification: null,\n      error: false\n    }\n  }\n  \n  componentDidMount() {\n    personService\n      .getAll()\n      .then(response => {\n        this.setState({persons: response})\n      })\n  }\n\n  addPerson = (event) => {\n    event.preventDefault()\n    \n    const newPerson = {\n        name: this.state.newName,\n        number: this.state.newPhone\n    }\n\n    const person = this.state.persons.find(p => p.name === newPerson.name)\n\n    if(person !== undefined) {\n      if (window.confirm(`${person.name} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        personService\n          .update(person.id, newPerson)\n          .then(changedPerson => {\n            const persons = this.state.persons.filter(p => p.name !== newPerson.name)\n            this.setState({\n              persons: persons.concat(changedPerson),\n              notification: `Henkilöä ${changedPerson.name} muokattu`\n            })\n            this.resetNoticationState()\n          })\n      }\n    } else {\n      personService\n        .create(newPerson)\n        .then(newPerson => {\n          this.setState({\n            persons: this.state.persons.concat(newPerson),\n            newName: '',\n            newPhone: '',\n            notification: `Henkilö ${newPerson.name} lisätty`\n          })\n          this.resetNoticationState()\n        })\n    }\n  }\n\n  resetNoticationState = () => {\n    setTimeout(() => {\n      this.setState({\n        notification: null,\n        error: false\n      })\n    }, 5000)\n  }\n\n  handleSearchChange = (event) => {\n    this.setState({filter: event.target.value})\n  }\n\n  handleNameChange = (event) => {\n    this.setState({newName: event.target.value})\n  }\n\n  handleNumberChange = (event) => {\n    this.setState({newPhone: event.target.value})\n  }\n\n  handlePersonRemoval = (id) => {\n    return () => {\n      console.log(\"ID: \", id)\n\n      const person = this.state.persons.find(p => p.id === id)\n\n      console.log(\"Person: \", person)\n      if (window.confirm(`Poistetaanko ${person.name}?`)) {\n        personService\n          .remove(id)\n          .then(() => {\n            const persons = this.state.persons.filter(p => p.id !== id)\n            this.setState({\n              persons,\n              notification: `Henkilö ${person.name} poistettu`\n            })\n          })\n          .catch(error => {\n            console.log(\"Error \", error)\n            this.setState({\n              persons: this.state.persons.filter(p => p.name !== person.name),\n              notification: `Henkilöä ${person.name} ei ole`,\n              error: true\n            })\n          })\n          this.resetNoticationState()          \n      }\n    }  \n  }\n\n  render() {\n    const applyFilter = this.state.filter.length === 0 ?\n                          this.state.persons :\n                          this.state.persons.filter(person => \n                            person.name.toLowerCase().includes(this.state.filter.toLowerCase()))\n\n    return (\n      <div>\n        <h2>Puhelinluettelo</h2>\n        <Notification message={this.state.notification} error={this.state.error} />\n        <Filter searchHandle={this.handleSearchChange} />\n        <h2>Lisää uusi</h2>\n        <form onSubmit={this.addPerson}>\n          <div>\n              nimi: <input onChange={this.handleNameChange}/>\n          </div>\n          <div>\n              puhelinnumero: <input onChange={this.handleNumberChange} />\n          </div>\n          <div>\n              <button type=\"submit\">lisää</button>\n          </div>\n        </form>\n        <h2>Numerot</h2>\n        <table>\n          <tbody>\n            {applyFilter.map(person => \n              <Person \n                key={person.name} \n                person={person} \n                deleteHandler={this.handlePersonRemoval(person.id)} \n              />\n            )}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}