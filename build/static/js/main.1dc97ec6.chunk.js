(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),l=(n(21),n(11)),c=n(12),u=n(14),s=n(13),m=n(15),f=function(e){var t=e.person,n=e.deleteHandler;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n},"Poista")))},h=function(e){var t=e.searchHandle;return r.a.createElement("div",null,"Rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{onChange:t}))},d=n(2),p=n.n(d),v="/api/persons",E={getAll:function(){return p.a.get(v).then(function(e){return e.data})},create:function(e){return p.a.post(v,e).then(function(e){return e.data})},remove:function(e){return p.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return p.a.put("".concat(v,"/").concat(e),t).then(function(e){return e.data})}},g=function(e){var t=e.message,n=e.error;return null===t?null:n?r.a.createElement("div",{className:"messagebox error"},t):r.a.createElement("div",{className:"messagebox notification"},t)},w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newPhone},a=n.state.persons.find(function(e){return e.name===t.name});void 0!==a?window.confirm("".concat(a.name," on jo luettelossa, korvataanko vanha numero uudella?"))&&E.update(a.id,t).then(function(e){var a=n.state.persons.filter(function(e){return e.name!==t.name});n.setState({persons:a.concat(e),notification:"Henkil\xf6\xe4 ".concat(e.name," muokattu")}),n.resetNoticationState()}):E.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newPhone:"",notification:"Henkil\xf6 ".concat(e.name," lis\xe4tty")}),n.resetNoticationState()})},n.resetNoticationState=function(){setTimeout(function(){n.setState({notification:null,error:!1})},5e3)},n.handleSearchChange=function(e){n.setState({filter:e.target.value})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newPhone:e.target.value})},n.handlePersonRemoval=function(e){return function(){console.log("ID: ",e);var t=n.state.persons.find(function(t){return t.id===e});console.log("Person: ",t),window.confirm("Poistetaanko ".concat(t.name,"?"))&&(E.remove(e).then(function(){var a=n.state.persons.filter(function(t){return t.id!==e});n.setState({persons:a,notification:"Henkil\xf6 ".concat(t.name," poistettu")})}).catch(function(e){console.log("Error ",e),n.setState({persons:n.state.persons.filter(function(e){return e.name!==t.name}),notification:"Henkil\xf6\xe4 ".concat(t.name," ei ole"),error:!0})}),n.resetNoticationState())}},n.state={persons:[],newName:"",newPhone:"",filter:"",notification:null,error:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=0===this.state.filter.length?this.state.persons:this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())});return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(g,{message:this.state.notification,error:this.state.error}),r.a.createElement(h,{searchHandle:this.handleSearchChange}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement("form",{onSubmit:this.addPerson},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{onChange:this.handleNameChange})),r.a.createElement("div",null,"puhelinnumero: ",r.a.createElement("input",{onChange:this.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(t){return r.a.createElement(f,{key:t.name,person:t,deleteHandler:e.handlePersonRemoval(t.id)})}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.1dc97ec6.chunk.js.map